(()=>{"use strict";var e={8045:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isAppQuitting=p,t.markSaveDone=function(e){if(p())return u.windowIds.delete(e),void(0===u.windowIds.size&&(u.requestCount=a,n.app.quit()));if(!c.has(e))return;c.set(e,a);var t=n.BrowserWindow.fromId(e);if(!t)return void console.error("\u65e0\u6cd5\u83b7\u53d6\u7a97\u53e3\u5b9e\u4f8b");t.close()},t.onWindowBeforeClose=function(e){if(!(0,s.isBaseWindow)(e))return!0;var t=c.get(e)||0;if(t>=l)return!0;if(0===t&&!function(){try{h(e)}catch(e){return console.error("\u53d1\u9001\u4fdd\u5b58\u4e8b\u4ef6\u5931\u8d25",e),!1}return!0}())return!0;return c.set(e,t+1),!1},t.cleanWindow=function(e){c.delete(e)},t.handleCloseWindow=function(e){var t=n.BrowserWindow.fromId(e);if(!t)return void console.error("\u65e0\u6cd5\u83b7\u53d6\u7a97\u53e3\u5b9e\u4f8b");t.close()},t.handleQuitApp=function(){i=!0,n.app.quit()},t.onBeforeQuit=function(){if(i=!0,0===u.requestCount){var e=(t=(0,s.getOpenedWindows)(),r=[],t.forEach((function(e,t){"base"===e.type&&r.push(t)})),r);if(e=e.filter((function(e){try{return h(e),u.windowIds.add(e),!0}catch(e){return console.error("\u53d1\u9001\u4fdd\u5b58\u4e8b\u4ef6\u5931\u8d25",e),!1}})),o.default.debug("first quit request, find base window ids",e),0===e.length)return!0}var t,r;if(u.requestCount++,u.requestCount>=l)return!0;return!1};var o=r(9979),n=r(2298),s=r(5784),i=!1,a=100,l=3,c=new Map,u={requestCount:0,windowIds:new Set};function p(){return i}function h(e){var t=n.BrowserWindow.fromId(e);if(!t)throw new Error("\u65e0\u6cd5\u83b7\u53d6\u7a97\u53e3\u5b9e\u4f8b");t.webContents.send("base_save",{})}},7826:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.WindowAction=void 0,function(e){e.Close="close",e.Minimize="minimize",e.Maximize="maximize",e.ToggleMaximize="toggleMaximize"}(r||(t.WindowAction=r={}))},1096:function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(r=1,o&&(n=2&a[0]?o.return:a[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(n=s.trys,(n=n.length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){s.label=a[1];break}if(6===a[0]&&s.label<n[1]){s.label=n[1],n=a;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(a);break}n[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{r=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.t=t.i18next=t.defaultNS=void 0,t.changeLang=function(e){return o(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,s.changeLanguage(e)];case 1:return t.sent(),[2]}}))}))};var s=r(1981);t.i18next=s;var i=r(5821);t.defaultNS="lang",s.init({debug:!0,lng:"zh_CN",fallbackLng:"en_US",defaultNS:t.defaultNS,resources:i.langResource}),t.t=s.t},2772:function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(r=1,o&&(n=2&a[0]?o.return:a[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(n=s.trys,(n=n.length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){s.label=a[1];break}if(6===a[0]&&s.label<n[1]){s.label=n[1],n=a;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(a);break}n[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{r=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=r(2298),i=r(9979),a=r(5680),l=r(5063),c=r(5784),u=r(5319),p=r(9395),h=r(8250),d=r(8045),g=r(1981);i.default.info("i18next init",g),s.app.requestSingleInstanceLock()||s.app.quit(),s.app.on("window-all-closed",(function(){i.default.debug("window all closed"),s.app.quit()})),s.app.on("before-quit",(function(e){i.default.debug("before-quit"),(0,d.onBeforeQuit)()||e.preventDefault()}));var f=(0,p.default)(),m=f.promise;s.app.on("ready",(function(){(0,a.setDefaultProtocol)(),f.resolve(),i.default.debug("app ready"),i.default.info("lang",s.app.getSystemLocale())})),(0,l.default)(),(0,c.setupSaveWindowState)(),function(){o(this,void 0,void 0,(function(){var e,t;return n(this,(function(r){switch(r.label){case 0:e=(0,h.startServe)(),i.default.debug("serverDeferred",e),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Promise.all([m,e])];case 2:return r.sent(),(0,c.restoreWindowState)()?i.default.debug("restoreWindowState success"):(0,c.createWindow)({type:"base_manager",params:{url:""}}),[3,4];case 3:return t=r.sent(),i.default.error("main error",t),(0,u.errorMessage)("\u542f\u52a8\u5931\u8d25\uff1a"+(0,u.exposeErrorMsg)(t)),s.app.quit(),[3,4];case 4:return[2]}}))}))}()},5063:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){o.ipcMain.on("open_base_window",(function(e,t){console.log("open_base_window REQUEST:",t);var r={baseId:t.baseId,url:t.url};(0,s.createWindow)({type:"base",params:r})})),o.ipcMain.on("select_open_dir",(function(e,t){console.log("select_open_dir REQUEST:",t);var r=o.BrowserWindow.fromWebContents(e.sender);if(!r)return console.error("\u65e0\u6cd5\u83b7\u53d6\u7a97\u53e3\u5b9e\u4f8b"),void e.reply("select_open_dir",{dir:null});o.dialog.showOpenDialog(r,{defaultPath:t.defaultDir,buttonLabel:"\u9009\u62e9\u6587\u4ef6\u5939",properties:["openDirectory","createDirectory","dontAddToRecent"]}).then((function(t){e.reply("select_open_dir",{dir:t.filePaths[0]})})).catch((function(e){console.error("\u9009\u62e9\u6587\u4ef6\u5939\u5931\u8d25:",e)}))})),o.ipcMain.on("resolve_path",(function(e,t){console.log("resolve_path REQUEST:",t);var r=o.app.getPath(t.type);e.reply("resolve_path",{path:r})})),o.ipcMain.on("set_window_action",(function(e,t){console.log("set_window_action REQUEST:",t);var r=o.BrowserWindow.fromWebContents(e.sender);if(r)switch(t.action){case n.WindowAction.Close:r.close();break;case n.WindowAction.Minimize:r.minimize();break;case n.WindowAction.Maximize:r.maximize();break;case n.WindowAction.ToggleMaximize:r.isMaximized()?r.unmaximize():r.maximize()}else console.error("\u65e0\u6cd5\u83b7\u53d6\u7a97\u53e3\u5b9e\u4f8b")})),o.ipcMain.on("base_save",(function(e,t){console.log("base_save REQUEST:",t);var r=o.BrowserWindow.fromWebContents(e.sender);r?(0,i.markSaveDone)(r.id):console.error("\u65e0\u6cd5\u83b7\u53d6\u7a97\u53e3\u5b9e\u4f8b")})),o.ipcMain.on("exposed_menu_items",(function(e,t){console.log("exposed_menu_items REQUEST:",t);var r=(0,a.getExposedMenuItems)(t.isBaseWindow);e.reply("exposed_menu_items",{items:r})})),o.ipcMain.on("trigger_menu_item",(function(e,t){console.log("trigger_menu_item REQUEST:",t),(0,a.triggerMenuItem)(t.id)})),o.ipcMain.on("show_in_folder",(function(e,t){console.log("show_in_folder REQUEST:",t),o.shell.showItemInFolder(t.path)})),o.ipcMain.on("update_shortcut",(function(e,t){console.log("update_shortcut REQUEST:",t),(0,a.onShortcutUpdate)(t)}))};var o=r(2298),n=r(7826),s=r(5784),i=r(8045),a=r(110)},110:function(e,t,r){var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},n=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var o,n=0,s=t.length;n<s;n++)!o&&n in t||(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.resizeTrafficLight=g,t.getDefaultMenu=m,t.onShortcutUpdate=function(e){h={};for(var t=0,r=e;t<r.length;t++){var o=r[t];h[o.action]=o.shortcut}if("darwin"!==process.platform)return;var n=a.BrowserWindow.getFocusedWindow();if(!n)return void console.error("\u65e0\u6cd5\u83b7\u53d6\u7a97\u53e3\u5b9e\u4f8b");l.Menu.setApplicationMenu(m((0,p.isBaseWindow)(n.id)))},t.getExposedMenuItems=function(e){return v(m(e).items).map(b)},t.triggerMenuItem=function(e){var t=y(m(!0).items).find((function(t){return t.id===e}));if(!t)return void u.default.error("\u65e0\u6cd5\u627e\u5230\u83dc\u5355\u9879",e);u.default.info("\u89e6\u53d1\u83dc\u5355\u9879",t.label,t.id),t.click()};var s,i,a=r(2298),l=r(2298),c=r(1096),u=r(9979),p=r(5784),h={};function d(){return"darwin"===process.platform}function g(e,t){if("darwin"===process.platform){var r=p.TRAFFIC_LIGHT_POSITION.y;if(1!==t){var o=p.TITLE_BAR_HEIGHT*t;r=Math.round((o-16)/2)}e.setWindowButtonPosition({x:p.TRAFFIC_LIGHT_POSITION.x,y:r})}}function f(e){return function(){console.log("call commander handler",e);var t=a.BrowserWindow.getFocusedWindow();if(t){var r={action:e};t.webContents.send("commander_run",r)}else console.error("\u65e0\u6cd5\u83b7\u53d6\u7a97\u53e3\u5b9e\u4f8b")}}function m(e){var t,r={id:i.AppAbout,label:(0,c.t)("menu:about"),accelerator:h[i.AppAbout],click:function(){a.app.showAboutPanel()}},o={id:i.AppQuit,label:(0,c.t)("menu:quit"),accelerator:h[i.AppQuit]||"CmdOrCtrl+Q",click:function(){a.app.quit()}},m={label:(0,c.t)("app_name"),submenu:[r,{type:"separator"},{label:(0,c.t)("menu:services"),role:"services"},{type:"separator"},{label:(0,c.t)("menu:hide"),role:"hide"},{label:(0,c.t)("menu:hideOthers"),role:"hideOthers"},{label:(0,c.t)("menu:unhide"),role:"unhide"},{type:"separator"},o]};return l.Menu.buildFromTemplate(n(n([],d()?[m]:[],!0),[{label:(0,c.t)("menu:file"),submenu:n(n(n([],(t=[],e?t=[{id:s.BaseNewNote,label:(0,c.t)("menu:newNote"),accelerator:h[s.BaseNewNote]||"CmdOrCtrl+N",click:f(s.BaseNewNote)},{type:"separator"},{id:s.BaseSave,label:(0,c.t)("menu:save"),accelerator:h[s.BaseSave]||"CmdOrCtrl+S",click:f(s.BaseSave)},{id:s.BaseSaveAs,label:(0,c.t)("menu:saveAs"),accelerator:h[s.BaseSaveAs]||"CmdOrCtrl+Shift+S",click:f(s.BaseSaveAs)},{type:"separator"},{id:s.TabCloseTab,label:(0,c.t)("menu:closeTab"),accelerator:h[s.TabCloseTab]||"CmdOrCtrl+W",click:f(s.TabCloseTab)}]:t),!0),[{id:i.AppClose,label:(0,c.t)("menu:close"),accelerator:h[i.AppClose]||"CmdOrCtrl+Shift+W",click:function(){var e=a.BrowserWindow.getFocusedWindow();e?e.close():console.error("\u65e0\u6cd5\u83b7\u53d6\u7a97\u53e3\u5b9e\u4f8b")}}],!1),function(){var e=[];return d()?e:e=[o]}(),!0)},{label:(0,c.t)("menu:edit"),submenu:[{label:(0,c.t)("menu:undo"),role:"undo"},{label:(0,c.t)("menu:redo"),role:"redo"},{type:"separator"},{label:(0,c.t)("menu:cut"),role:"cut"},{label:(0,c.t)("menu:copy"),role:"copy"},{label:(0,c.t)("menu:paste"),role:"paste"},{label:(0,c.t)("menu:delete"),role:"delete"},{label:(0,c.t)("menu:selectAll"),role:"selectAll"},{type:"separator"}]},{label:(0,c.t)("menu:view"),submenu:n(n([],function(){var t=[];return e?t=[{id:s.CoreShowCommandPalette,label:(0,c.t)("menu:commandPalette"),accelerator:h[s.CoreShowCommandPalette]||"CmdOrCtrl+P",click:f(s.CoreShowCommandPalette)},{type:"separator"},{id:s.LayoutShowDirectory,label:(0,c.t)("menu:directory"),accelerator:h[s.LayoutShowDirectory]||"CmdOrCtrl+1",click:f(s.LayoutShowDirectory)},{id:s.LayoutShowMdList,label:(0,c.t)("menu:mdList"),accelerator:h[s.LayoutShowMdList]||"CmdOrCtrl+2",click:f(s.LayoutShowMdList)},{id:s.LayoutShowFindReplace,label:(0,c.t)("menu:findReplace"),accelerator:h[s.LayoutShowFindReplace]||"Shift+CmdOrCtrl+F",click:f(s.LayoutShowFindReplace)},{id:s.LayoutShowHistory,label:(0,c.t)("menu:history"),accelerator:h[s.LayoutShowHistory]||"Shift+CmdOrCtrl+H",click:f(s.LayoutShowHistory)},{type:"separator"}]:t}(),!0),[{type:"separator"},{id:i.AppZoomReset,label:(0,c.t)("menu:resetZoom"),accelerator:h[i.AppZoomReset]||"CmdOrCtrl+0",click:function(){var e=a.BrowserWindow.getFocusedWindow();e?(e.webContents.setZoomFactor(1),g(e,1)):console.error("\u65e0\u6cd5\u83b7\u53d6\u7a97\u53e3\u5b9e\u4f8b")}},{id:i.AppZoomIn,label:(0,c.t)("menu:zoomIn"),accelerator:"CmdOrCtrl+=",click:function(){var e=a.BrowserWindow.getFocusedWindow();if(e){var t=Math.min(e.webContents.getZoomFactor()+.1,p.MAX_ZOOM_FACTOR);e.webContents.setZoomFactor(t),g(e,t),u.default.debug("zoomIn",t)}else console.error("\u65e0\u6cd5\u83b7\u53d6\u7a97\u53e3\u5b9e\u4f8b")}},{id:i.AppZoomOut,label:(0,c.t)("menu:zoomOut"),accelerator:h[i.AppZoomOut]||"CmdOrCtrl+-",click:function(){var e=a.BrowserWindow.getFocusedWindow();if(e){var t=Math.max(e.webContents.getZoomFactor()-.1,p.MIN_ZOOM_FACTOR);e.webContents.setZoomFactor(t),g(e,t),u.default.debug("zoomOut",t)}else console.error("\u65e0\u6cd5\u83b7\u53d6\u7a97\u53e3\u5b9e\u4f8b")}},{type:"separator"}],!1)},{label:(0,c.t)("menu:window"),role:"windowMenu",submenu:[{type:"separator"},{id:i.AppForceReload,label:(0,c.t)("menu:reload"),accelerator:h[i.AppForceReload]||"Shift+CmdOrCtrl+R",click:function(){var e=a.BrowserWindow.getFocusedWindow();e?e.webContents.reloadIgnoringCache():console.error("\u65e0\u6cd5\u83b7\u53d6\u7a97\u53e3\u5b9e\u4f8b")}},{type:"separator"},{id:s.BaseRevealBaseInFolder,label:(0,c.t)("menu:revealBase"),click:f(s.BaseRevealBaseInFolder)}]},{label:(0,c.t)("menu:help"),submenu:n(n([],function(){var e=[];return d()?e:e=[r]}(),!0),[{type:"separator"},{id:s.CoreShortcutKeySettings,label:(0,c.t)("menu:shortcutKeySettings"),click:f(s.CoreShortcutKeySettings)},{id:i.AppToggleDevTools,label:(0,c.t)("menu:toggleDevTools"),accelerator:h[i.AppToggleDevTools]||"Shift+CmdOrCtrl+I",click:function(){var e=a.BrowserWindow.getFocusedWindow();e?e.webContents.toggleDevTools():console.error("\u65e0\u6cd5\u83b7\u53d6\u7a97\u53e3\u5b9e\u4f8b")}}],!1)}],!1))}function v(e){var t,r=e.reduce((function(e,t){if(t.submenu){var r=v(t.submenu.items);(r.length>0||t.id)&&e.push(o(o({},t),{submenu:l.Menu.buildFromTemplate(r)}))}else(t.id||"separator"===t.type)&&e.push(t);return e}),[]);if(0===r.length)return[];for(var n=[],s=0,i=r;s<i.length;s++){var a=i[s];"separator"===a.type&&"separator"===(null===(t=n[n.length-1])||void 0===t?void 0:t.type)||n.push(a)}return n.every((function(e){return"separator"===e.type}))?[]:n}function y(e){for(var t=[],r=0,o=e;r<o.length;r++){var n=o[r];n.id&&t.push(n),n.submenu&&(t=t.concat(y(n.submenu.items)))}return t}function b(e){var t;return"separator"===e.type?{id:"__SEPARATOR__",label:"__SEPARATOR__",children:[]}:{id:e.id,label:e.label,shortcut:e.accelerator,children:null===(t=e.submenu)||void 0===t?void 0:t.items.map(b)}}!function(e){e.BaseNewNote="base.new_note",e.BaseSave="base.save",e.BaseSaveAs="base.save_as",e.BaseRevealBaseInFolder="base.reveal_base_in_folder",e.TabCloseTab="tab.close_tab",e.CoreShowCommandPalette="core.show_command_palette",e.CoreShortcutKeySettings="core.shortcut_key_settings",e.LayoutShowDirectory="layout.show_directory",e.LayoutShowMdList="layout.show_md_list",e.LayoutShowFindReplace="layout.show_find_replace",e.LayoutShowHistory="layout.show_history"}(s||(s={})),function(e){e.AppClose="app.close",e.AppQuit="app.quit",e.AppToggleDevTools="app.toggle_dev_tools",e.AppForceReload="app.force_reload",e.AppAbout="app.about",e.AppZoomReset="app.zoom_reset",e.AppZoomIn="app.zoom_in",e.AppZoomOut="app.zoom_out"}(i||(i={}))},5680:function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(r=1,o&&(n=2&a[0]?o.return:a[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(n=s.trys,(n=n.length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){s.label=a[1];break}if(6===a[0]&&s.label<n[1]){s.label=n[1],n=a;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(a);break}n[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{r=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.setDefaultProtocol=function(){var e;s.app.removeAsDefaultProtocolClient(a),e=s.app.setAsDefaultProtocolClient(a),console.log("\u662f\u5426\u6ce8\u518c\u6210\u529f",e)},t.watchProtocol=function(e){function t(t){return o(this,void 0,void 0,(function(){var r;return n(this,(function(o){try{r=new URL(t),i.default.info("got schema message: ",r.hostname,r.pathname,t),"daobox.cn"===r.hostname&&e.webContents.send(r.pathname,t)}catch(e){}return[2]}))}))}s.app.on("open-url",(function(e,r){l.test(r)&&t(r)})),s.app.on("second-instance",(function(e,r){r.forEach((function(e){l.test(e)&&t(e)}))}))};var s=r(2298),i=r(9979),a="daobox";var l=new RegExp("^".concat(a,"://"))},8250:function(e,t,r){var o=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,s){function i(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}l((o=o.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,o,n,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(l){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(r=1,o&&(n=2&a[0]?o.return:a[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,a[1])).done)return n;switch(o=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(n=s.trys,(n=n.length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){s.label=a[1];break}if(6===a[0]&&s.label<n[1]){s.label=n[1],n=a;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(a);break}n[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],o=0}finally{r=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getServerPort=function(){return d},t.startServe=function(){return o(this,void 0,void 0,(function(){var e,t,r,o,f;return n(this,(function(n){if(!(e=c.join(__dirname,"..","bin","everkm-note".concat("win32"===process.platform?".exe":"")))||!u.existsSync(e))return t="\u672a\u627e\u5230\u670d\u52a1\u7a0b\u5e8f\uff0c\u8bf7\u91cd\u65b0\u5b89\u88c5\u3002",l.default.error(t,e),(0,p.errorMessage)(t),[2,Promise.reject(t)];l.default.info("start serve ",e),r=i.app.getPath("userData"),o=i.app.getPath("documents");try{s=(0,a.spawn)(e,[],{windowsHide:!0,env:{EVERKM_NOTE_DOCUMENTS_DIR:o,EVERKM_NOTE_SUPPORT_DIR:r}})}catch(e){return l.default.error("catch run serve error",e.toString()),(0,p.errorMessage)("\u542f\u52a8\u670d\u52a1\u5931\u8d25\uff1a"+e.toString()),[2,Promise.reject(e.toString())]}return f=(0,h.default)(),s.stdout.on("data",(function(e){l.default.debug("stdout: ".concat(e));var t=null==e?void 0:e.toString().match(/listen at [0-9]+\.[0-9]+\.[0-9]+\.[0-9]+:(\d+)/);if(t){var r=t[1];d=parseInt(r,10),f.resolve()}})),s.stderr.on("data",(function(e){var t;l.default.error("stderr: ".concat(e)),t=e,g.push(t),g=g.slice(-20)})),s.on("close",(function(e){l.default.info("child process exited with code ".concat(e)),0!==e&&f.reject("\u6bd3\u77e5\u7b14\u8bb0\u542f\u52a8\u5931\u8d25! \u8bf7\u8bbf\u95eehttps://www.everkm.com\u83b7\u5f97\u5e2e\u52a9\u3002\n\u9519\u8bef\u8be6\u60c5: "+g.join("\n"))})),[2,f.promise]}))}))};var s,i=r(2298),a=r(2081),l=r(9979),c=r(1017),u=r(7147),p=r(5319),h=r(9395),d=0,g=[];i.app.on("quit",(function(){l.default.debug("app quit"),null==s||s.kill("SIGTERM")}))},5319:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.errorMessage=function(e){o.dialog.showErrorBox("\u6bd3\u77e5\u7b14\u8bb0",e),o.app.quit()},t.exposeErrorMsg=function(e){var t,r;return(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.message)||(null==e?void 0:e.message)||(null===(r=e.toString)||void 0===r?void 0:r.call(e))};var o=r(2298)},5784:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_ZOOM_FACTOR=t.MIN_ZOOM_FACTOR=t.TITLE_BAR_HEIGHT=t.TRAFFIC_LIGHT_POSITION=void 0,t.getOpenedWindows=function(){return p},t.isBaseWindow=function(e){var t=p.get(e);if(!t)return!1;return"base"===t.type},t.createWindow=d,t.restoreWindowState=function(){var e=o.app.getPath("userData"),t=s.join(e,"window_states.json"),r=JSON.parse(i.readFileSync(t,"utf8")),n=!1;return r.forEach((function(e){try{d(e),n=!0}catch(t){l.default.error("restoreWindowState error",t,e)}})),n},t.setupSaveWindowState=function(){o.app.on("before-quit",(function(){var e,t,r,n;e=o.BrowserWindow.getAllWindows().reduce((function(e,t){var r=p.get(t.id);if(r){var o=t.getBounds();e.push({type:r.type,params:r.params,x:o.x,y:o.y,width:o.width,height:o.height,isMaximized:t.isMaximized()})}return e}),[]),t=o.app.getPath("userData"),r=s.join(t,"window_states.json"),n=JSON.stringify(e,null,2),l.default.debug("saveAllWindowState",n),i.writeFileSync(r,n)}))};var o=r(2298),n=r(5680),s=r(1017),i=r(7147),a=r(8250),l=r(9979),c=r(8045),u=r(110);t.TRAFFIC_LIGHT_POSITION={x:12,y:10},t.TITLE_BAR_HEIGHT=34,t.MIN_ZOOM_FACTOR=.7,t.MAX_ZOOM_FACTOR=1.6;var p=new Map;function h(e){var t=(0,a.getServerPort)();return 0!==t?e.replace(/:\d+/,":".concat(t)):e}function d(e){var r=e.x,i=e.y,d=e.width,g=e.height,f=e.isMaximized,m=e.type,v=e.params;l.default.debug("createWindow",e);var y="";switch(m){case"local_web":y=v.url;break;case"base_manager":y=(y=v.url).length?h(y):"http://127.0.0.1:".concat((0,a.getServerPort)(),"/");break;case"base":(y=v.url).length||(y=h(y));break;default:throw new Error("\u4e0d\u652f\u6301\u7684\u7a97\u53e3\u7c7b\u578b: ".concat(m))}if(!y.length)throw new Error("Url \u4e0d\u80fd\u4e3a\u7a7a");var b="base_manager"===e.type,w=new o.BrowserWindow({x:r,y:i,width:b?400:d,height:g,maxWidth:b?400:void 0,maximizable:!b,fullscreenable:!b,minWidth:260,minHeight:320,webPreferences:{nodeIntegration:!1,contextIsolation:!0,preload:s.join(__dirname,"preload.js")},frame:!1,titleBarStyle:"hidden",titleBarOverlay:{color:"#ddddddff",symbolColor:"#202020ff",height:t.TITLE_BAR_HEIGHT},show:!1});w.setBackgroundColor("#f1f2f3"),f&&w.maximize(),w.once("ready-to-show",(function(){(0,u.resizeTrafficLight)(w,w.webContents.getZoomFactor()),w.show()})),(0,n.watchProtocol)(w);var S=y;return w.webContents.on("will-navigate",(function(e,t){t.startsWith(S)||(e.preventDefault(),o.shell.openExternal(t))})),w.webContents.on("did-navigate-in-page",(function(e,t){t.startsWith(S)||(e.preventDefault(),o.shell.openExternal(t))})),w.on("close",(function(e){(0,c.isAppQuitting)()||((0,c.onWindowBeforeClose)(w.id)?w.destroy():e.preventDefault())})),w.on("closed",(function(){(0,c.isAppQuitting)()||(p.delete(w.id),(0,c.cleanWindow)(w.id))})),w.on("focus",(function(){var t=(0,u.getDefaultMenu)("base"===e.type);o.Menu.setApplicationMenu(t)})),p.set(w.id,e),w.loadURL(S),w.webContents.on("did-fail-load",(function(e,t,r){l.default.error("did-fail-load",t,r,y)})),w}},3218:e=>{e.exports=class{constructor({processMessage:e}){this.processMessage=e,this.buffer=[],this.enabled=!1,this.begin=this.begin.bind(this),this.commit=this.commit.bind(this),this.reject=this.reject.bind(this)}addMessage(e){this.buffer.push(e)}begin(){this.enabled=[]}commit(){this.enabled=!1,this.buffer.forEach((e=>this.processMessage(e))),this.buffer=[]}reject(){this.enabled=!1,this.buffer=[]}}},3253:(e,t,r)=>{const o=r(8611),n=r(3218);class s{static instances={};dependencies={};errorHandler=null;eventLogger=null;functions={};hooks=[];isDev=!1;levels=null;logId=null;scope=null;transports={};variables={};constructor({allowUnknownLevel:e=!1,dependencies:t={},errorHandler:r,eventLogger:i,initializeFn:a,isDev:l=!1,levels:c=["error","warn","info","verbose","debug","silly"],logId:u,transportFactories:p={},variables:h}={}){this.addLevel=this.addLevel.bind(this),this.create=this.create.bind(this),this.initialize=this.initialize.bind(this),this.logData=this.logData.bind(this),this.processMessage=this.processMessage.bind(this),this.allowUnknownLevel=e,this.buffering=new n(this),this.dependencies=t,this.initializeFn=a,this.isDev=l,this.levels=c,this.logId=u,this.scope=o(this),this.transportFactories=p,this.variables=h||{};for(const e of this.levels)this.addLevel(e,!1);this.log=this.info,this.functions.log=this.log,this.errorHandler=r,r?.setOptions({...t,logFn:this.error}),this.eventLogger=i,i?.setOptions({...t,logger:this});for(const[e,r]of Object.entries(p))this.transports[e]=r(this,t);s.instances[u]=this}static getInstance({logId:e}){return this.instances[e]||this.instances.default}addLevel(e,t=this.levels.length){!1!==t&&this.levels.splice(t,0,e),this[e]=(...t)=>this.logData(t,{level:e}),this.functions[e]=this[e]}catchErrors(e){return this.processMessage({data:["log.catchErrors is deprecated. Use log.errorHandler instead"],level:"warn"},{transports:["console"]}),this.errorHandler.startCatching(e)}create(e){return"string"==typeof e&&(e={logId:e}),new s({dependencies:this.dependencies,errorHandler:this.errorHandler,initializeFn:this.initializeFn,isDev:this.isDev,transportFactories:this.transportFactories,variables:{...this.variables},...e})}compareLevels(e,t,r=this.levels){const o=r.indexOf(e),n=r.indexOf(t);return-1===n||-1===o||n<=o}initialize(e={}){this.initializeFn({logger:this,...this.dependencies,...e})}logData(e,t={}){this.buffering.enabled?this.buffering.addMessage({data:e,...t}):this.processMessage({data:e,...t})}processMessage(e,{transports:t=this.transports}={}){if("errorHandler"===e.cmd)return void this.errorHandler.handle(e.error,{errorName:e.errorName,processType:"renderer",showDialog:Boolean(e.showDialog)});let r=e.level;this.allowUnknownLevel||(r=this.levels.includes(e.level)?e.level:"info");const o={date:new Date,logId:this.logId,...e,level:r,variables:{...this.variables,...e.variables}};for(const[r,n]of this.transportEntries(t))if("function"==typeof n&&!1!==n.level&&this.compareLevels(n.level,e.level))try{const e=this.hooks.reduce(((e,t)=>e?t(e,n,r):e),o);e&&n({...e,data:[...e.data]})}catch(e){this.processInternalErrorFn(e)}}processInternalErrorFn(e){}transportEntries(e=this.transports){return(Array.isArray(e)?e:Object.entries(e)).map((e=>{switch(typeof e){case"string":return this.transports[e]?[e,this.transports[e]]:null;case"function":return[e.name,e];default:return Array.isArray(e)?e:null}})).filter(Boolean)}}e.exports=s},8611:e=>{e.exports=function(e){return Object.defineProperties(t,{defaultLabel:{value:"",writable:!0},labelPadding:{value:!0,writable:!0},maxLabelLength:{value:0,writable:!0},labelLength:{get(){switch(typeof t.labelPadding){case"boolean":return t.labelPadding?t.maxLabelLength:0;case"number":return t.labelPadding;default:return 0}}}});function t(r){t.maxLabelLength=Math.max(t.maxLabelLength,r.length);const o={};for(const t of e.levels)o[t]=(...o)=>e.logData(o,{level:t,scope:r});return o.log=o.info,o}}},9189:(e,t,r)=>{const{transform:o}=r(8460);function n(e){const t=Math.abs(e);return`${e>0?"-":"+"}${Math.floor(t/60).toString().padStart(2,"0")}:${(t%60).toString().padStart(2,"0")}`}function s({data:e,logger:t,message:r}){const{defaultLabel:o,labelLength:n}=t?.scope||{},s=e[0];let i,a=r.scope;return a||(a=o),i=""===a?n>0?"".padEnd(n+3):"":"string"==typeof a?` (${a})`.padEnd(n+3):"",e[0]=s.replace("{scope}",i),e}function i({data:e,message:t}){let r=e[0];if("string"!=typeof r)return e;r=r.replace("{level}]",`${t.level}]`.padEnd(6," "));const o=t.date||new Date;return e[0]=r.replace(/\{(\w+)}/g,((e,r)=>{switch(r){case"level":return t.level||"info";case"logId":return t.logId;case"y":return o.getFullYear().toString(10);case"m":return(o.getMonth()+1).toString(10).padStart(2,"0");case"d":return o.getDate().toString(10).padStart(2,"0");case"h":return o.getHours().toString(10).padStart(2,"0");case"i":return o.getMinutes().toString(10).padStart(2,"0");case"s":return o.getSeconds().toString(10).padStart(2,"0");case"ms":return o.getMilliseconds().toString(10).padStart(3,"0");case"z":return n(o.getTimezoneOffset());case"iso":return o.toISOString();default:return t.variables?.[r]||e}})).trim(),e}function a({data:e}){const t=e[0];if("string"!=typeof t)return e;if(t.lastIndexOf("{text}")===t.length-6)return e[0]=t.replace(/\s?{text}/,""),""===e[0]&&e.shift(),e;const r=t.split("{text}");let o=[];return""!==r[0]&&o.push(r[0]),o=o.concat(e.slice(1)),""!==r[1]&&o.push(r[1]),o}e.exports={concatFirstStringElements:function({data:e}){if("string"!=typeof e[0]||"string"!=typeof e[1])return e;if(e[0].match(/%[1cdfiOos]/))return e;return[`${e[0]} ${e[1]}`,...e.slice(2)]},formatScope:s,formatText:a,formatVariables:i,timeZoneFromOffset:n,format({message:e,logger:t,transport:r,data:n=e?.data}){switch(typeof r.format){case"string":return o({message:e,logger:t,transforms:[i,s,a],transport:r,initialData:[r.format,...n]});case"function":return r.format({data:n,level:e?.level||"info",logger:t,message:e,transport:r});default:return n}}}},4021:e=>{e.exports={transformStyles:n,applyAnsiStyles:({data:e})=>n(e,r,o),removeStyles:({data:e})=>n(e,(()=>""))};const t={unset:"\x1b[0m",black:"\x1b[30m",red:"\x1b[31m",green:"\x1b[32m",yellow:"\x1b[33m",blue:"\x1b[34m",magenta:"\x1b[35m",cyan:"\x1b[36m",white:"\x1b[37m"};function r(e){const r=e.replace(/color:\s*(\w+).*/,"$1").toLowerCase();return t[r]||""}function o(e){return e+t.unset}function n(e,t,r){const o={};return e.reduce(((e,n,s,i)=>{if(o[s])return e;if("string"==typeof n){let e=s,a=!1;n=n.replace(/%[1cdfiOos]/g,(r=>{if(e+=1,"%c"!==r)return r;const s=i[e];return"string"==typeof s?(o[e]=!0,a=!0,t(s,n)):r})),a&&r&&(n=r(n))}return e.push(n),e}),[])}},8460:e=>{e.exports={transform:function({logger:e,message:t,transport:r,initialData:o=t?.data||[],transforms:n=r?.transforms}){return n.reduce(((o,n)=>"function"==typeof n?n({data:o,logger:e,message:t,transport:r}):o),o)}}},9979:(e,t,r)=>{const o="undefined"==typeof process||"renderer"===process.type||"worker"===process.type,n="object"==typeof process&&"browser"===process.type;o?(r(968),e.exports=r(43)):e.exports=r(n?5006:5411)},1555:(e,t,r)=>{const o=r(1017),n=r(4866);e.exports=class extends n{electron=void 0;constructor({electron:e}={}){super(),this.electron=e}getAppName(){let e;try{e=this.appName||this.electron.app?.name||this.electron.app?.getName()}catch{}return e||super.getAppName()}getAppUserDataPath(e){return this.getPath("userData")||super.getAppUserDataPath(e)}getAppVersion(){let e;try{e=this.electron.app?.getVersion()}catch{}return e||super.getAppVersion()}getElectronLogPath(){return this.getPath("logs")||super.getElectronLogPath()}getPath(e){try{return this.electron.app?.getPath(e)}catch{return}}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:`Electron ${process.versions.electron}`,os:this.getOsVersion()}}getSystemPathAppData(){return this.getPath("appData")||super.getSystemPathAppData()}isDev(){if(void 0!==this.electron.app?.isPackaged)return!this.electron.app.isPackaged;if("string"==typeof process.execPath){return o.basename(process.execPath).toLowerCase().startsWith("electron")}return super.isDev()}onAppEvent(e,t){return this.electron.app?.on(e,t),()=>{this.electron.app?.off(e,t)}}onAppReady(e){this.electron.app?.isReady()?e():this.electron.app?.once?this.electron.app?.once("ready",e):e()}onEveryWebContentsEvent(e,t){return this.electron.webContents?.getAllWebContents()?.forEach((r=>{r.on(e,t)})),this.electron.app?.on("web-contents-created",r),()=>{this.electron.webContents?.getAllWebContents().forEach((r=>{r.off(e,t)})),this.electron.app?.off("web-contents-created",r)};function r(r,o){o.on(e,t)}}onIpc(e,t){this.electron.ipcMain?.on(e,t)}onIpcInvoke(e,t){this.electron.ipcMain?.handle?.(e,t)}openUrl(e,t=console.error){this.electron.shell?.openExternal(e).catch(t)}setPreloadFileForSessions({filePath:e,includeFutureSession:t=!0,getSessions:r=()=>[this.electron.session?.defaultSession]}){for(const e of r().filter(Boolean))o(e);function o(t){t.setPreloads([...t.getPreloads(),e])}t&&this.onAppEvent("session-created",(e=>{o(e)}))}sendIpc(e,t){this.electron.BrowserWindow?.getAllWindows()?.forEach((r=>{!1===r.webContents?.isDestroyed()&&!1===r.webContents?.isCrashed()&&r.webContents.send(e,t)}))}showErrorBox(e,t){this.electron.dialog?.showErrorBox(e,t)}}},5006:(e,t,r)=>{const o=r(2298),n=r(1555),{initialize:s}=r(329),i=r(194),a=new n({electron:o}),l=i({dependencies:{externalApi:a},initializeFn:s});function c(e){l.Logger.getInstance(e)?.processMessage(e)}e.exports=l,a.onIpc("__ELECTRON_LOG__",((e,t)=>{t.scope&&l.Logger.getInstance(t).scope(t.scope);const r=new Date(t.date);c({...t,date:r.getTime()?r:new Date})})),a.onIpcInvoke("__ELECTRON_LOG__",((e,{cmd:t="",logId:r})=>{if("getOptions"===t){return{levels:l.Logger.getInstance({logId:r}).levels,logId:r}}return c({data:[`Unknown cmd '${t}'`],level:"error"}),{}}))},329:(e,t,r)=>{const o=r(7147),n=r(2037),s=r(1017),i=r(968);e.exports={initialize({externalApi:e,getSessions:t,includeFutureSession:r,logger:a,preload:l=!0,spyRendererConsole:c=!1}){e.onAppReady((()=>{try{l&&function({externalApi:e,getSessions:t,includeFutureSession:r,preloadOption:a}){let l="string"==typeof a?a:void 0;try{l=s.resolve(__dirname,"../renderer/electron-log-preload.js")}catch{}if(!l||!o.existsSync(l)){l=s.join(e.getAppUserDataPath()||n.tmpdir(),"electron-log-preload.js");const t=`\n      try {\n        (${i.toString()})(require('electron'));\n      } catch(e) {\n        console.error(e);\n      }\n    `;o.writeFileSync(l,t,"utf8")}e.setPreloadFileForSessions({filePath:l,includeFutureSession:r,getSessions:t})}({externalApi:e,getSessions:t,includeFutureSession:r,preloadOption:l}),c&&function({externalApi:e,logger:t}){const r=["verbose","info","warning","error"];e.onEveryWebContentsEvent("console-message",((e,o,n)=>{t.processMessage({data:[n],level:r[o],variables:{processType:"renderer"}})}))}({externalApi:e,logger:a})}catch(e){a.warn(e)}}))}}},8259:e=>{e.exports=class{externalApi=void 0;isActive=!1;logFn=void 0;onError=void 0;showDialog=!0;constructor({externalApi:e,logFn:t,onError:r,showDialog:o}={}){this.createIssue=this.createIssue.bind(this),this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.setOptions({externalApi:e,logFn:t,onError:r,showDialog:o}),this.startCatching=this.startCatching.bind(this),this.stopCatching=this.stopCatching.bind(this)}handle(e,{logFn:t=this.logFn,onError:r=this.onError,processType:o="browser",showDialog:n=this.showDialog,errorName:s=""}={}){e=function(e){if(e instanceof Error)return e;if(e&&"object"==typeof e){if(e.message)return Object.assign(new Error(e.message),e);try{return new Error(JSON.stringify(e))}catch(t){return new Error(`Couldn't normalize error ${String(e)}: ${t}`)}}return new Error(`Can't normalize error ${String(e)}`)}(e);try{if("function"==typeof r){const t=this.externalApi?.getVersions()||{},n=this.createIssue;if(!1===r({createIssue:n,error:e,errorName:s,processType:o,versions:t}))return}s?t(s,e):t(e),n&&!s.includes("rejection")&&this.externalApi&&this.externalApi.showErrorBox(`A JavaScript error occurred in the ${o} process`,e.stack)}catch{console.error(e)}}setOptions({externalApi:e,logFn:t,onError:r,showDialog:o}){"object"==typeof e&&(this.externalApi=e),"function"==typeof t&&(this.logFn=t),"function"==typeof r&&(this.onError=r),"boolean"==typeof o&&(this.showDialog=o)}startCatching({onError:e,showDialog:t}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:e,showDialog:t}),process.on("uncaughtException",this.handleError),process.on("unhandledRejection",this.handleRejection))}stopCatching(){this.isActive=!1,process.removeListener("uncaughtException",this.handleError),process.removeListener("unhandledRejection",this.handleRejection)}createIssue(e,t){this.externalApi?.openUrl(`${e}?${new URLSearchParams(t).toString()}`)}handleError(e){this.handle(e,{errorName:"Unhandled"})}handleRejection(e){const t=e instanceof Error?e:new Error(JSON.stringify(e));this.handle(t,{errorName:"Unhandled rejection"})}}},9160:e=>{e.exports=class{disposers=[];format="{eventSource}#{eventName}:";formatters={app:{"certificate-error":({args:e})=>this.arrayToObject(e.slice(1,4),["url","error","certificate"]),"child-process-gone":({args:e})=>1===e.length?e[0]:e,"render-process-gone":({args:[e,t]})=>t&&"object"==typeof t?{...t,...this.getWebContentsDetails(e)}:[]},webContents:{"console-message":({args:[e,t,r,o]})=>{if(!(e<3))return{message:t,source:`${o}:${r}`}},"did-fail-load":({args:e})=>this.arrayToObject(e,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"did-fail-provisional-load":({args:e})=>this.arrayToObject(e,["errorCode","errorDescription","validatedURL","isMainFrame","frameProcessId","frameRoutingId"]),"plugin-crashed":({args:e})=>this.arrayToObject(e,["name","version"]),"preload-error":({args:e})=>this.arrayToObject(e,["preloadPath","error"])}};events={app:{"certificate-error":!0,"child-process-gone":!0,"render-process-gone":!0},webContents:{"did-fail-load":!0,"did-fail-provisional-load":!0,"plugin-crashed":!0,"preload-error":!0,unresponsive:!0}};externalApi=void 0;level="error";scope="";constructor(e={}){this.setOptions(e)}setOptions({events:e,externalApi:t,level:r,logger:o,format:n,formatters:s,scope:i}){"object"==typeof e&&(this.events=e),"object"==typeof t&&(this.externalApi=t),"string"==typeof r&&(this.level=r),"object"==typeof o&&(this.logger=o),"string"!=typeof n&&"function"!=typeof n||(this.format=n),"object"==typeof s&&(this.formatters=s),"string"==typeof i&&(this.scope=i)}startLogging(e={}){this.setOptions(e),this.disposeListeners();for(const e of this.getEventNames(this.events.app))this.disposers.push(this.externalApi.onAppEvent(e,((...t)=>{this.handleEvent({eventSource:"app",eventName:e,handlerArgs:t})})));for(const e of this.getEventNames(this.events.webContents))this.disposers.push(this.externalApi.onEveryWebContentsEvent(e,((...t)=>{this.handleEvent({eventSource:"webContents",eventName:e,handlerArgs:t})})))}stopLogging(){this.disposeListeners()}arrayToObject(e,t){const r={};return t.forEach(((t,o)=>{r[t]=e[o]})),e.length>t.length&&(r.unknownArgs=e.slice(t.length)),r}disposeListeners(){this.disposers.forEach((e=>e())),this.disposers=[]}formatEventLog({eventName:e,eventSource:t,handlerArgs:r}){const[o,...n]=r;if("function"==typeof this.format)return this.format({args:n,event:o,eventName:e,eventSource:t});const s=this.formatters[t]?.[e];let i=n;if("function"==typeof s&&(i=s({args:n,event:o,eventName:e,eventSource:t})),!i)return;const a={};Array.isArray(i)?a.args=i:"object"==typeof i&&Object.assign(a,i),"webContents"===t&&Object.assign(a,this.getWebContentsDetails(o?.sender));return[this.format.replace("{eventSource}","app"===t?"App":"WebContents").replace("{eventName}",e),a]}getEventNames(e){return e&&"object"==typeof e?Object.entries(e).filter((([e,t])=>t)).map((([e])=>e)):[]}getWebContentsDetails(e){if(!e?.loadURL)return{};try{return{webContents:{id:e.id,url:e.getURL()}}}catch{return{}}}handleEvent({eventName:e,eventSource:t,handlerArgs:r}){const o=this.formatEventLog({eventName:e,eventSource:t,handlerArgs:r});if(o){const e=this.scope?this.logger.scope(this.scope):this.logger;e?.[this.level]?.(...o)}}}},4866:(e,t,r)=>{const o=r(2081),n=r(2037),s=r(1017),i=r(4582);e.exports=class{appName=void 0;appPackageJson=void 0;platform=process.platform;getAppLogPath(e=this.getAppName()){return"darwin"===this.platform?s.join(this.getSystemPathHome(),"Library/Logs",e):s.join(this.getAppUserDataPath(e),"logs")}getAppName(){const e=this.appName||this.getAppPackageJson()?.name;if(!e)throw new Error("electron-log can't determine the app name. It tried these methods:\n1. Use `electron.app.name`\n2. Use productName or name from the nearest package.json`\nYou can also set it through log.transports.file.setAppName()");return e}getAppPackageJson(){return"object"!=typeof this.appPackageJson&&(this.appPackageJson=i.findAndReadPackageJson()),this.appPackageJson}getAppUserDataPath(e=this.getAppName()){return e?s.join(this.getSystemPathAppData(),e):void 0}getAppVersion(){return this.getAppPackageJson()?.version}getElectronLogPath(){return this.getAppLogPath()}getMacOsVersion(){const e=Number(n.release().split(".")[0]);return e<=19?"10."+(e-4):e-9}getOsVersion(){let e=n.type().replace("_"," "),t=n.release();return"Darwin"===e&&(e="macOS",t=this.getMacOsVersion()),`${e} ${t}`}getPathVariables(){const e=this.getAppName(),t=this.getAppVersion(),r=this;return{appData:this.getSystemPathAppData(),appName:e,appVersion:t,get electronDefaultDir(){return r.getElectronLogPath()},home:this.getSystemPathHome(),libraryDefaultDir:this.getAppLogPath(e),libraryTemplate:this.getAppLogPath("{appName}"),temp:this.getSystemPathTemp(),userData:this.getAppUserDataPath(e)}}getSystemPathAppData(){const e=this.getSystemPathHome();switch(this.platform){case"darwin":return s.join(e,"Library/Application Support");case"win32":return{NODE_ENV:"production",IN_ELECTRON:"on",ENV_File:"/tmp/tmp-env-42.json",PACKAGE_NAME:"note-main"}.APPDATA||s.join(e,"AppData/Roaming");default:return{NODE_ENV:"production",IN_ELECTRON:"on",ENV_File:"/tmp/tmp-env-42.json",PACKAGE_NAME:"note-main"}.XDG_CONFIG_HOME||s.join(e,".config")}}getSystemPathHome(){return n.homedir?.()||{NODE_ENV:"production",IN_ELECTRON:"on",ENV_File:"/tmp/tmp-env-42.json",PACKAGE_NAME:"note-main"}.HOME}getSystemPathTemp(){return n.tmpdir()}getVersions(){return{app:`${this.getAppName()} ${this.getAppVersion()}`,electron:void 0,os:this.getOsVersion()}}isDev(){return"1"==={NODE_ENV:"production",IN_ELECTRON:"on",ENV_File:"/tmp/tmp-env-42.json",PACKAGE_NAME:"note-main"}.ELECTRON_IS_DEV}isElectron(){return Boolean(process.versions.electron)}onAppEvent(e,t){}onAppReady(e){e()}onEveryWebContentsEvent(e,t){}onIpc(e,t){}onIpcInvoke(e,t){}openUrl(e,t=console.error){const r={darwin:"open",win32:"start",linux:"xdg-open"}[process.platform]||"xdg-open";o.exec(`${r} ${e}`,{},(e=>{e&&t(e)}))}setAppName(e){this.appName=e}setPlatform(e){this.platform=e}setPreloadFileForSessions({filePath:e,includeFutureSession:t=!0,getSessions:r=()=>[]}){}sendIpc(e,t){}showErrorBox(e,t){}}},194:(e,t,r)=>{const o=r(3253),n=r(8259),s=r(9160),i=r(4745),a=r(5553),l=r(6583),c=r(2631);e.exports=function({dependencies:e,initializeFn:t}){const r=new o({dependencies:e,errorHandler:new n,eventLogger:new s,initializeFn:t,isDev:e.externalApi?.isDev(),logId:"default",transportFactories:{console:i,file:a,ipc:l,remote:c},variables:{processType:"main"}});return r.default=r,r.Logger=o,r.processInternalErrorFn=e=>{r.transports.console.writeFn({message:{data:["Unhandled electron-log error",e],level:"error"}})},r}},5411:(e,t,r)=>{const o=r(4866),n=r(194)({dependencies:{externalApi:new o}});e.exports=n},4582:(e,t,r)=>{const o=r(7147),n=r(1017);function s(...e){if(e[0])try{const t=function(e,t){let r=t;for(;;){const t=n.parse(r),s=t.root,i=t.dir;if(o.existsSync(n.join(r,e)))return n.resolve(n.join(r,e));if(r===s)return null;r=i}}("package.json",n.join(...e));if(!t)return;const r=JSON.parse(o.readFileSync(t,"utf8")),s=r?.productName||r?.name;if(!s||"electron"===s.toLowerCase())return;return s?{name:s,version:r?.version}:void 0}catch(e){return}}e.exports={findAndReadPackageJson:function(){return s(function(){try{return r.c[r.s]?.filename}catch{return}}())||s(function(){const e=process.argv.filter((e=>0===e.indexOf("--user-data-dir=")));if(0===e.length||"string"!=typeof e[0])return null;return e[0].replace("--user-data-dir=","")}())||s(process.resourcesPath,"app.asar")||s(process.resourcesPath,"app")||s(process.cwd())||{name:void 0,version:void 0}},tryReadJsonAt:s}},9976:(e,t,r)=>{const o=r(3837);function n(e={}){const t=new WeakSet;return function(r,o){if("object"==typeof o&&null!==o){if(t.has(o))return;t.add(o)}return s(r,o,e)}}function s(e,t,r={}){const o=!1!==r?.serializeMapAndSet;return t instanceof Error?t.stack:t?"function"==typeof t?`[function] ${t.toString()}`:t instanceof Date?t.toISOString():o&&t instanceof Map&&Object.fromEntries?Object.fromEntries(t):o&&t instanceof Set&&Array.from?Array.from(t):t:t}e.exports={serialize:s,maxDepth({data:t,transport:r,depth:o=r?.depth??6}){if(!t)return t;if(o<1)return Array.isArray(t)?"[array]":"object"==typeof t&&t?"[object]":t;if(Array.isArray(t))return t.map((t=>e.exports.maxDepth({data:t,depth:o-1})));if("object"!=typeof t)return t;if(t&&"function"==typeof t.toISOString)return t;if(null===t)return null;if(t instanceof Error)return t;const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=e.exports.maxDepth({data:t[r],depth:o-1}));return n},toJSON:({data:e})=>JSON.parse(JSON.stringify(e,n())),toString({data:e,transport:t}){const r=t?.inspectOptions||{},s=e.map((e=>{if(void 0!==e)try{const t=JSON.stringify(e,n(),"  ");return void 0===t?void 0:JSON.parse(t)}catch(t){return e}}));return o.formatWithOptions(r,...s)}}},4745:(e,t,r)=>{const{concatFirstStringElements:o,format:n}=r(9189),{maxDepth:s,toJSON:i}=r(9976),{applyAnsiStyles:a,removeStyles:l}=r(4021),{transform:c}=r(8460),u={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};e.exports=h;const p=`%c{h}:{i}:{s}.{ms}{scope}%c ${"win32"===process.platform?">":"\u203a"} {text}`;function h(e){return Object.assign((function t(r){const o=c({logger:e,message:r,transport:t});t.writeFn({message:{...r,data:o}})}),{format:p,level:"silly",transforms:[d,n,g,o,s,i],useStyles:{NODE_ENV:"production",IN_ELECTRON:"on",ENV_File:"/tmp/tmp-env-42.json",PACKAGE_NAME:"note-main"}.FORCE_STYLES,writeFn({message:e}){(u[e.level]||u.info)(...e.data)}})}function d({data:e,message:t,transport:r}){return r.format!==p?e:[`color:${f(t.level)}`,"color:unset",...e]}function g(e){const{message:t,transport:r}=e;return(function(e,t){if("boolean"==typeof e)return e;const r="error"===t||"warn"===t?process.stderr:process.stdout;return r&&r.isTTY}(r.useStyles,t.level)?a:l)(e)}function f(e){const t={error:"red",warn:"yellow",info:"cyan",default:"unset"};return t[e]||t.default}Object.assign(h,{DEFAULT_FORMAT:p})},3173:(e,t,r)=>{const o=r(2361),n=r(7147),s=r(2037);e.exports=class extends o{asyncWriteQueue=[];bytesWritten=0;hasActiveAsyncWriting=!1;path=null;initialSize=void 0;writeOptions=null;writeAsync=!1;constructor({path:e,writeOptions:t={encoding:"utf8",flag:"a",mode:438},writeAsync:r=!1}){super(),this.path=e,this.writeOptions=t,this.writeAsync=r}get size(){return this.getSize()}clear(){try{return n.writeFileSync(this.path,"",{mode:this.writeOptions.mode,flag:"w"}),this.reset(),!0}catch(e){return"ENOENT"===e.code||(this.emit("error",e,this),!1)}}crop(e){try{const t=function(e,t){const r=Buffer.alloc(t),o=n.statSync(e),s=Math.min(o.size,t),i=Math.max(0,o.size-t),a=n.openSync(e,"r"),l=n.readSync(a,r,0,s,i);return n.closeSync(a),r.toString("utf8",0,l)}(this.path,e||4096);this.clear(),this.writeLine(`[log cropped]${s.EOL}${t}`)}catch(e){this.emit("error",new Error(`Couldn't crop file ${this.path}. ${e.message}`),this)}}getSize(){if(void 0===this.initialSize)try{const e=n.statSync(this.path);this.initialSize=e.size}catch(e){this.initialSize=0}return this.initialSize+this.bytesWritten}increaseBytesWrittenCounter(e){this.bytesWritten+=Buffer.byteLength(e,this.writeOptions.encoding)}isNull(){return!1}nextAsyncWrite(){const e=this;if(this.hasActiveAsyncWriting||0===this.asyncWriteQueue.length)return;const t=this.asyncWriteQueue.join("");this.asyncWriteQueue=[],this.hasActiveAsyncWriting=!0,n.writeFile(this.path,t,this.writeOptions,(r=>{e.hasActiveAsyncWriting=!1,r?e.emit("error",new Error(`Couldn't write to ${e.path}. ${r.message}`),this):e.increaseBytesWrittenCounter(t),e.nextAsyncWrite()}))}reset(){this.initialSize=void 0,this.bytesWritten=0}toString(){return this.path}writeLine(e){if(e+=s.EOL,this.writeAsync)return this.asyncWriteQueue.push(e),void this.nextAsyncWrite();try{n.writeFileSync(this.path,e,this.writeOptions),this.increaseBytesWrittenCounter(e)}catch(e){this.emit("error",new Error(`Couldn't write to ${this.path}. ${e.message}`),this)}}}},6207:(e,t,r)=>{const o=r(2361),n=r(7147),s=r(1017),i=r(3173),a=r(2158);e.exports=class extends o{store={};constructor(){super(),this.emitError=this.emitError.bind(this)}provide({filePath:e,writeOptions:t={},writeAsync:r=!1}){let o;try{if(e=s.resolve(e),this.store[e])return this.store[e];o=this.createFile({filePath:e,writeOptions:t,writeAsync:r})}catch(t){o=new a({path:e}),this.emitError(t,o)}return o.on("error",this.emitError),this.store[e]=o,o}createFile({filePath:e,writeOptions:t,writeAsync:r}){return this.testFileWriting({filePath:e,writeOptions:t}),new i({path:e,writeOptions:t,writeAsync:r})}emitError(e,t){this.emit("error",e,t)}testFileWriting({filePath:e,writeOptions:t}){n.mkdirSync(s.dirname(e),{recursive:!0}),n.writeFileSync(e,"",{flag:"a",mode:t.mode})}}},2158:(e,t,r)=>{const o=r(3173);e.exports=class extends o{clear(){}crop(){}getSize(){return 0}isNull(){return!0}writeLine(){}}},5553:(e,t,r)=>{const o=r(7147),n=r(2037),s=r(1017),i=r(6207),{transform:a}=r(8460),{removeStyles:l}=r(4021),{format:c,concatFirstStringElements:u}=r(9189),{toString:p}=r(9976);e.exports=function(e,{registry:t=h,externalApi:r}={}){let i;t.listenerCount("error")<1&&t.on("error",((e,t)=>{m(`Can't write to ${t}`,e)}));return Object.assign(g,{fileName:d(e.variables.processType),format:"[{y}-{m}-{d} {h}:{i}:{s}.{ms}] [{level}]{scope} {text}",getFile:v,inspectOptions:{depth:5},level:"silly",maxSize:1048576,readAllLogs:function({fileFilter:e=e=>e.endsWith(".log")}={}){f();const t=s.dirname(g.resolvePathFn(i));if(!o.existsSync(t))return[];return o.readdirSync(t).map((e=>s.join(t,e))).filter(e).map((e=>{try{return{path:e,lines:o.readFileSync(e,"utf8").split(n.EOL)}}catch{return null}})).filter(Boolean)},sync:!0,transforms:[l,c,u,p],writeOptions:{flag:"a",mode:438,encoding:"utf8"},archiveLogFn(e){const t=e.toString(),r=s.parse(t);try{o.renameSync(t,s.join(r.dir,`${r.name}.old${r.ext}`))}catch(t){m("Could not rotate log",t);const r=Math.round(g.maxSize/4);e.crop(Math.min(r,262144))}},resolvePathFn:e=>s.join(e.libraryDefaultDir,e.fileName),setAppName(t){e.dependencies.externalApi.setAppName(t)}});function g(t){const r=v(t);g.maxSize>0&&r.size>g.maxSize&&(g.archiveLogFn(r),r.reset());const o=a({logger:e,message:t,transport:g});r.writeLine(o)}function f(){i||(i=Object.create(Object.prototype,{...Object.getOwnPropertyDescriptors(r.getPathVariables()),fileName:{get:()=>g.fileName,enumerable:!0}}),"function"==typeof g.archiveLog&&(g.archiveLogFn=g.archiveLog,m("archiveLog is deprecated. Use archiveLogFn instead")),"function"==typeof g.resolvePath&&(g.resolvePathFn=g.resolvePath,m("resolvePath is deprecated. Use resolvePathFn instead")))}function m(t,r=null,o="error"){const n=[`electron-log.transports.file: ${t}`];r&&n.push(r),e.transports.console({data:n,date:new Date,level:o})}function v(e){f();const r=g.resolvePathFn(i,e);return t.provide({filePath:r,writeAsync:!g.sync,writeOptions:g.writeOptions})}};const h=new i;function d(e=process.type){switch(e){case"renderer":return"renderer.log";case"worker":return"worker.log";default:return"main.log"}}},6583:(e,t,r)=>{const{maxDepth:o,toJSON:n}=r(9976),{transform:s}=r(8460);e.exports=function(e,{externalApi:t}){return Object.assign(r,{depth:3,eventId:"__ELECTRON_LOG_IPC__",level:!!e.isDev&&"silly",transforms:[n,o]}),t?.isElectron()?r:void 0;function r(o){"renderer"!==o?.variables?.processType&&t?.sendIpc(r.eventId,{...o,data:s({logger:e,message:o,transport:r})})}}},2631:(e,t,r)=>{const o=r(3685),n=r(5687),{transform:s}=r(8460),{removeStyles:i}=r(4021),{toJSON:a,maxDepth:l}=r(9976);e.exports=function(e){return Object.assign(t,{client:{name:"electron-application"},depth:6,level:!1,requestOptions:{},transforms:[i,a,l],makeBodyFn:({message:e})=>JSON.stringify({client:t.client,data:e.data,date:e.date.getTime(),level:e.level,scope:e.scope,variables:e.variables}),processErrorFn({error:r}){e.processMessage({data:[`electron-log: can't POST ${t.url}`,r],level:"warn"},{transports:["console","file"]})},sendRequestFn({serverUrl:e,requestOptions:t,body:r}){const s=(e.startsWith("https:")?n:o).request(e,{method:"POST",...t,headers:{"Content-Type":"application/json","Content-Length":r.length,...t.headers}});return s.write(r),s.end(),s}});function t(r){if(!t.url)return;const o=t.makeBodyFn({logger:e,message:{...r,data:s({logger:e,message:r,transport:t})},transport:t}),n=t.sendRequestFn({serverUrl:t.url,requestOptions:t.requestOptions,body:Buffer.from(o,"utf8")});n.on("error",(o=>t.processErrorFn({error:o,logger:e,message:r,request:n,transport:t})))}}},968:(e,t,r)=>{let o={};try{o=r(2298)}catch(e){}function n({contextBridge:e,ipcRenderer:t}){if(!t)return;t.on("__ELECTRON_LOG_IPC__",((e,t)=>{window.postMessage({cmd:"message",...t})})),t.invoke("__ELECTRON_LOG__",{cmd:"getOptions"}).catch((e=>console.error(new Error(`electron-log isn't initialized in the main process. Please call log.initialize() before. ${e.message}`))));const r={sendToMain(e){try{t.send("__ELECTRON_LOG__",e)}catch(r){console.error("electronLog.sendToMain ",r,"data:",e),t.send("__ELECTRON_LOG__",{cmd:"errorHandler",error:{message:r?.message,stack:r?.stack},errorName:"sendToMain"})}},log(...e){r.sendToMain({data:e,level:"info"})}};for(const e of["error","warn","info","verbose","debug","silly"])r[e]=(...t)=>r.sendToMain({data:t,level:e});if(e&&process.contextIsolated)try{e.exposeInMainWorld("__electronLog",r)}catch{}"object"==typeof window?window.__electronLog=r:__electronLog=r}o.ipcRenderer&&n(o),e.exports=n},43:(e,t,r)=>{const o=r(3253),n=r(9264),s=r(9621),i=r(7728);e.exports=function(){const e=new o({allowUnknownLevel:!0,errorHandler:new n,initializeFn:()=>{},logId:"default",transportFactories:{console:s,ipc:i},variables:{processType:"renderer"}});e.errorHandler.setOptions({logFn({error:t,errorName:r,showDialog:o}){e.transports.console({data:[r,t].filter(Boolean),level:"error"}),e.transports.ipc({cmd:"errorHandler",error:{cause:t?.cause,code:t?.code,name:t?.name,message:t?.message,stack:t?.stack},errorName:r,logId:e.logId,showDialog:o})}}),"object"==typeof window&&window.addEventListener("message",(e=>{const{cmd:t,logId:r,...n}=e.data||{},s=o.getInstance({logId:r});"message"===t&&s.processMessage(n,{transports:["console"]})}));return new Proxy(e,{get:(t,r)=>void 0!==t[r]?t[r]:(...t)=>e.logData(t,{level:r})})}(),e.exports.Logger=o,e.exports.default=e.exports},9264:e=>{const t=console.error;e.exports=class{logFn=null;onError=null;showDialog=!1;preventDefault=!0;constructor({logFn:e=null}={}){this.handleError=this.handleError.bind(this),this.handleRejection=this.handleRejection.bind(this),this.startCatching=this.startCatching.bind(this),this.logFn=e}handle(e,{logFn:r=this.logFn,errorName:o="",onError:n=this.onError,showDialog:s=this.showDialog}={}){try{!1!==n?.({error:e,errorName:o,processType:"renderer"})&&r({error:e,errorName:o,showDialog:s})}catch{t(e)}}setOptions({logFn:e,onError:t,preventDefault:r,showDialog:o}){"function"==typeof e&&(this.logFn=e),"function"==typeof t&&(this.onError=t),"boolean"==typeof r&&(this.preventDefault=r),"boolean"==typeof o&&(this.showDialog=o)}startCatching({onError:e,showDialog:t}={}){this.isActive||(this.isActive=!0,this.setOptions({onError:e,showDialog:t}),window.addEventListener("error",(e=>{this.preventDefault&&e.preventDefault?.(),this.handleError(e.error||e)})),window.addEventListener("unhandledrejection",(e=>{this.preventDefault&&e.preventDefault?.(),this.handleRejection(e.reason||e)})))}handleError(e){this.handle(e,{errorName:"Unhandled"})}handleRejection(e){const t=e instanceof Error?e:new Error(JSON.stringify(e));this.handle(t,{errorName:"Unhandled rejection"})}}},9621:(e,t,r)=>{const{transform:o}=r(8460);e.exports=function(e){return Object.assign((function t(r){t.writeFn({message:{...r,data:o({logger:e,message:r,transport:t})}})}),{format:"{h}:{i}:{s}.{ms}{scope} \u203a {text}",transforms:[s],writeFn({message:{level:e,data:t}}){const r=n[e]||n.info;setTimeout((()=>r(...t)))}})};const n={error:console.error,warn:console.warn,info:console.info,verbose:console.info,debug:console.debug,silly:console.debug,log:console.log};function s({data:e=[],logger:t={},message:r={},transport:o={}}){if("function"==typeof o.format)return o.format({data:e,level:r?.level||"info",logger:t,message:r,transport:o});if("string"!=typeof o.format)return e;e.unshift(o.format),"string"==typeof e[1]&&e[1].match(/%[1cdfiOos]/)&&(e=[`${e[0]} ${e[1]}`,...e.slice(2)]);const n=r.date||new Date;return e[0]=e[0].replace(/\{(\w+)}/g,((e,o)=>{switch(o){case"level":return r.level;case"logId":return r.logId;case"scope":{const e=r.scope||t.scope?.defaultLabel;return e?` (${e})`:""}case"text":return"";case"y":return n.getFullYear().toString(10);case"m":return(n.getMonth()+1).toString(10).padStart(2,"0");case"d":return n.getDate().toString(10).padStart(2,"0");case"h":return n.getHours().toString(10).padStart(2,"0");case"i":return n.getMinutes().toString(10).padStart(2,"0");case"s":return n.getSeconds().toString(10).padStart(2,"0");case"ms":return n.getMilliseconds().toString(10).padStart(3,"0");case"iso":return n.toISOString();default:return r.variables?.[o]||e}})).trim(),e}},7728:(e,t,r)=>{const{transform:o}=r(8460);e.exports=function(e){return Object.assign((function t(r){if(!window.__electronLog)return void e.processMessage({data:["electron-log: logger isn't initialized in the main process"],level:"error"},{transports:["console"]});try{const n=o({initialData:r,logger:e,message:r,transport:t});__electronLog.sendToMain(n)}catch(t){e.transports.console({data:["electronLog.transports.ipc",t,"data:",r.data],level:"error"})}}),{depth:5,transforms:[i]})};const n=new Set([Promise,WeakMap,WeakSet]);function s(e){return Object(e)!==e}function i({data:e,depth:t,seen:r=new WeakSet,transport:o={}}={}){const a=t||o.depth||5;return r.has(e)?"[Circular]":a<1?s(e)?e:Array.isArray(e)?"[Array]":`[${typeof e}]`:["function","symbol"].includes(typeof e)?e.toString():s(e)?e:n.has(e.constructor)?`[${e.constructor.name}]`:Array.isArray(e)?e.map((e=>i({data:e,depth:a-1,seen:r}))):e instanceof Date?e.toISOString():e instanceof Error?e.stack:e instanceof Map?new Map(Array.from(e).map((([e,t])=>[i({data:e,depth:a-1,seen:r}),i({data:t,depth:a-1,seen:r})]))):e instanceof Set?new Set(Array.from(e).map((e=>i({data:e,depth:a-1,seen:r})))):(r.add(e),Object.fromEntries(Object.entries(e).map((([e,t])=>[e,i({data:t,depth:a-1,seen:r})]))))}},1981:e=>{const t=e=>"string"==typeof e,r=()=>{let e,t;const r=new Promise(((r,o)=>{e=r,t=o}));return r.resolve=e,r.reject=t,r},o=e=>null==e?"":""+e,n=/###/g,s=e=>e&&e.indexOf("###")>-1?e.replace(n,"."):e,i=e=>!e||t(e),a=(e,r,o)=>{const n=t(r)?r.split("."):r;let a=0;for(;a<n.length-1;){if(i(e))return{};const t=s(n[a]);!e[t]&&o&&(e[t]=new o),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++a}return i(e)?{}:{obj:e,k:s(n[a])}},l=(e,t,r)=>{const{obj:o,k:n}=a(e,t,Object);if(void 0!==o||1===t.length)return void(o[n]=r);let s=t[t.length-1],i=t.slice(0,t.length-1),l=a(e,i,Object);for(;void 0===l.obj&&i.length;)s=`${i[i.length-1]}.${s}`,i=i.slice(0,i.length-1),l=a(e,i,Object),l?.obj&&void 0!==l.obj[`${l.k}.${s}`]&&(l.obj=void 0);l.obj[`${l.k}.${s}`]=r},c=(e,t)=>{const{obj:r,k:o}=a(e,t);if(r&&Object.prototype.hasOwnProperty.call(r,o))return r[o]},u=(e,r,o)=>{for(const n in r)"__proto__"!==n&&"constructor"!==n&&(n in e?t(e[n])||e[n]instanceof String||t(r[n])||r[n]instanceof String?o&&(e[n]=r[n]):u(e[n],r[n],o):e[n]=r[n]);return e},p=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const d=e=>t(e)?e.replace(/[&<>"'\/]/g,(e=>h[e])):e;const g=[" ",",","?","!",";"],f=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}(20),m=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const o=t.split(r);let n=e;for(let e=0;e<o.length;){if(!n||"object"!=typeof n)return;let t,s="";for(let i=e;i<o.length;++i)if(i!==e&&(s+=r),s+=o[i],t=n[s],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&i<o.length-1)continue;e+=i-e+1;break}n=t}return n},v=e=>e?.replace("_","-"),y={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class b{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||y,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,r,o,n){return n&&!this.debug?null:(t(e[0])&&(e[0]=`${o}${this.prefix} ${e[0]}`),this.logger[r](e))}create(e){return new b(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new b(this.logger,e)}}var w=new b;class S{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const r=this.observers[e].get(t)||0;this.observers[e].set(t,r+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach((e=>{let[t,o]=e;for(let e=0;e<o;e++)t(...r)}))}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach((t=>{let[o,n]=t;for(let t=0;t<n;t++)o.apply(o,[e,...r])}))}}}class x extends S{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,r,o){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,i=void 0!==n.ignoreJSONStructure?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,r],o&&(Array.isArray(o)?a.push(...o):t(o)&&s?a.push(...o.split(s)):a.push(o)));const l=c(this.data,a);return!l&&!r&&!o&&e.indexOf(".")>-1&&(e=a[0],r=a[1],o=a.slice(2).join(".")),!l&&i&&t(o)?m(this.data?.[e]?.[r],o,s):l}addResource(e,t,r,o){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const s=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator;let i=[e,t];r&&(i=i.concat(s?r.split(s):r)),e.indexOf(".")>-1&&(i=e.split("."),o=t,t=i[1]),this.addNamespaces(t),l(this.data,i,o),n.silent||this.emit("added",e,t,r,o)}addResources(e,r,o){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const n in o)(t(o[n])||Array.isArray(o[n]))&&this.addResource(e,r,n,o[n],{silent:!0});n.silent||this.emit("added",e,r,o)}addResourceBundle(e,t,r,o,n){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},i=[e,t];e.indexOf(".")>-1&&(i=e.split("."),o=r,r=t,t=i[1]),this.addNamespaces(t);let a=c(this.data,i)||{};s.skipCopy||(r=JSON.parse(JSON.stringify(r))),o?u(a,r,n):a={...a,...r},l(this.data,i,a),s.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var O={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,o,n){return e.forEach((e=>{t=this.processors[e]?.process(t,r,o,n)??t})),t}};const E={},L=e=>!t(e)&&"boolean"!=typeof e&&"number"!=typeof e;class A extends S{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,o;super(),r=e,o=this,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach((e=>{r[e]&&(o[e]=r[e])})),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=w.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==e)return!1;const r=this.resolve(e,t);return void 0!==r?.res}extractFromKey(e,r){let o=void 0!==r.nsSeparator?r.nsSeparator:this.options.nsSeparator;void 0===o&&(o=":");const n=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator;let s=r.ns||this.options.defaultNS||[];const i=o&&e.indexOf(o)>-1,a=!(this.options.userDefinedKeySeparator||r.keySeparator||this.options.userDefinedNsSeparator||r.nsSeparator||((e,t,r)=>{t=t||"",r=r||"";const o=g.filter((e=>t.indexOf(e)<0&&r.indexOf(e)<0));if(0===o.length)return!0;const n=f.getRegExp(`(${o.map((e=>"?"===e?"\\?":e)).join("|")})`);let s=!n.test(e);if(!s){const t=e.indexOf(r);t>0&&!n.test(e.substring(0,t))&&(s=!0)}return s})(e,o,n));if(i&&!a){const r=e.match(this.interpolator.nestingRegexp);if(r&&r.length>0)return{key:e,namespaces:t(s)?[s]:s};const i=e.split(o);(o!==n||o===n&&this.options.ns.indexOf(i[0])>-1)&&(s=i.shift()),e=i.join(n)}return{key:e,namespaces:t(s)?[s]:s}}translate(e,r,o){if("object"!=typeof r&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof r&&(r={...r}),r||(r={}),null==e)return"";Array.isArray(e)||(e=[String(e)]);const n=void 0!==r.returnDetails?r.returnDetails:this.options.returnDetails,s=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,{key:i,namespaces:a}=this.extractFromKey(e[e.length-1],r),l=a[a.length-1],c=r.lng||this.language,u=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===c?.toLowerCase()){if(u){const e=r.nsSeparator||this.options.nsSeparator;return n?{res:`${l}${e}${i}`,usedKey:i,exactUsedKey:i,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:`${l}${e}${i}`}return n?{res:i,usedKey:i,exactUsedKey:i,usedLng:c,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:i}const p=this.resolve(e,r);let h=p?.res;const d=p?.usedKey||i,g=p?.exactUsedKey||i,f=void 0!==r.joinArrays?r.joinArrays:this.options.joinArrays,m=!this.i18nFormat||this.i18nFormat.handleAsObject,v=void 0!==r.count&&!t(r.count),y=A.hasDefaultValue(r),b=v?this.pluralResolver.getSuffix(c,r.count,r):"",w=r.ordinal&&v?this.pluralResolver.getSuffix(c,r.count,{ordinal:!1}):"",S=v&&!r.ordinal&&0===r.count,x=S&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${b}`]||r[`defaultValue${w}`]||r.defaultValue;let O=h;m&&!h&&y&&(O=x);const E=L(O),C=Object.prototype.toString.apply(O);if(!(m&&O&&E&&["[object Number]","[object Function]","[object RegExp]"].indexOf(C)<0)||t(f)&&Array.isArray(O))if(m&&t(f)&&Array.isArray(h))h=h.join(f),h&&(h=this.extendTranslation(h,e,r,o));else{let t=!1,n=!1;!this.isValidLookup(h)&&y&&(t=!0,h=x),this.isValidLookup(h)||(n=!0,h=i);const a=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&n?void 0:h,u=y&&x!==h&&this.options.updateMissing;if(n||t||u){if(this.logger.log(u?"updateKey":"missingKey",c,l,i,u?x:h),s){const e=this.resolve(i,{...r,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let r=0;r<t.length;r++)e.push(t[r]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(r.lng||this.language):e.push(r.lng||this.language);const o=(e,t,o)=>{const n=y&&o!==h?o:a;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,n,u,r):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(e,l,t,n,u,r),this.emit("missingKey",e,l,t,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&v?e.forEach((e=>{const t=this.pluralResolver.getSuffixes(e,r);S&&r[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach((t=>{o([e],i+t,r[`defaultValue${t}`]||x)}))})):o(e,i,x))}h=this.extendTranslation(h,e,r,p,o),n&&h===i&&this.options.appendNamespaceToMissingKey&&(h=`${l}:${i}`),(n||t)&&this.options.parseMissingKeyHandler&&(h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}:${i}`:i,t?h:void 0))}else{if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(d,O,{...r,ns:a}):`key '${i} (${this.language})' returned an object instead of string.`;return n?(p.res=e,p.usedParams=this.getUsedParamsDetails(r),p):e}if(s){const e=Array.isArray(O),t=e?[]:{},o=e?g:d;for(const e in O)if(Object.prototype.hasOwnProperty.call(O,e)){const n=`${o}${s}${e}`;t[e]=y&&!h?this.translate(n,{...r,defaultValue:L(x)?x[e]:void 0,joinArrays:!1,ns:a}):this.translate(n,{...r,joinArrays:!1,ns:a}),t[e]===n&&(t[e]=O[e])}h=t}}return n?(p.res=h,p.usedParams=this.getUsedParamsDetails(r),p):h}extendTranslation(e,r,o,n,s){var i=this;if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...o},o.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init({...o,interpolation:{...this.options.interpolation,...o.interpolation}});const a=t(e)&&(void 0!==o?.interpolation?.skipOnVariables?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let l;if(a){const t=e.match(this.interpolator.nestingRegexp);l=t&&t.length}let c=o.replace&&!t(o.replace)?o.replace:o;if(this.options.interpolation.defaultVariables&&(c={...this.options.interpolation.defaultVariables,...c}),e=this.interpolator.interpolate(e,c,o.lng||this.language||n.usedLng,o),a){const t=e.match(this.interpolator.nestingRegexp);l<(t&&t.length)&&(o.nest=!1)}!o.lng&&n&&n.res&&(o.lng=this.language||n.usedLng),!1!==o.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s?.[0]!==t[0]||o.context?i.translate(...t,r):(i.logger.warn(`It seems you are nesting recursively key: ${t[0]} in key: ${r[0]}`),null)}),o)),o.interpolation&&this.interpolator.reset()}const a=o.postProcess||this.options.postProcess,l=t(a)?[a]:a;return null!=e&&l?.length&&!1!==o.applyPostProcessor&&(e=O.handle(l,e,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(o)},...o}:o,this)),e}resolve(e){let r,o,n,s,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(e)&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(r))return;const l=this.extractFromKey(e,a),c=l.key;o=c;let u=l.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const p=void 0!==a.count&&!t(a.count),h=p&&!a.ordinal&&0===a.count,d=void 0!==a.context&&(t(a.context)||"number"==typeof a.context)&&""!==a.context,g=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);u.forEach((e=>{this.isValidLookup(r)||(i=e,E[`${g[0]}-${e}`]||!this.utils?.hasLoadedNamespace||this.utils?.hasLoadedNamespace(i)||(E[`${g[0]}-${e}`]=!0,this.logger.warn(`key "${o}" for languages "${g.join(", ")}" won't get resolved as namespace "${i}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),g.forEach((t=>{if(this.isValidLookup(r))return;s=t;const o=[c];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(o,c,t,e,a);else{let e;p&&(e=this.pluralResolver.getSuffix(t,a.count,a));const r=`${this.options.pluralSeparator}zero`,n=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(o.push(c+e),a.ordinal&&0===e.indexOf(n)&&o.push(c+e.replace(n,this.options.pluralSeparator)),h&&o.push(c+r)),d){const t=`${c}${this.options.contextSeparator}${a.context}`;o.push(t),p&&(o.push(t+e),a.ordinal&&0===e.indexOf(n)&&o.push(t+e.replace(n,this.options.pluralSeparator)),h&&o.push(t+r))}}let i;for(;i=o.pop();)this.isValidLookup(r)||(n=i,r=this.getResource(t,e,i,a))})))}))})),{res:r,usedKey:o,exactUsedKey:n,usedLng:s,usedNS:i}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,r,o):this.resourceStore.getResource(e,t,r,o)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],o=e.replace&&!t(e.replace);let n=o?e.replace:e;if(o&&void 0!==e.count&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!o){n={...n};for(const e of r)delete n[e]}return n}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,12)&&void 0!==e[r])return!0;return!1}}class C{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=w.create("languageUtils")}getScriptPartFromCode(e){if(!(e=v(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=v(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(t(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(e){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const r=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(r)||(t=r)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find((e=>e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0?void 0:e.indexOf("-")>0&&r.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===r||0===e.indexOf(r)&&r.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,r){if(!e)return[];if("function"==typeof e&&(e=e(r)),t(e)&&(e=[e]),Array.isArray(e))return e;if(!r)return e.default||[];let o=e[r];return o||(o=e[this.getScriptPartFromCode(r)]),o||(o=e[this.formatLanguageCode(r)]),o||(o=e[this.getLanguagePartFromCode(r)]),o||(o=e.default),o||[]}toResolveHierarchy(e,r){const o=this.getFallbackCodes(r||this.options.fallbackLng||[],e),n=[],s=e=>{e&&(this.isSupportedCode(e)?n.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return t(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):t(e)&&s(this.formatLanguageCode(e)),o.forEach((e=>{n.indexOf(e)<0&&s(this.formatLanguageCode(e))})),n}}const k={zero:0,one:1,two:2,few:3,many:4,other:5},_={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class P{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=w.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=v("dev"===e?"en":e),o=t.ordinal?"ordinal":"cardinal",n=JSON.stringify({cleanedCode:r,type:o});if(n in this.pluralRulesCache)return this.pluralRulesCache[n];let s;try{s=new Intl.PluralRules(r,{type:o})}catch(r){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),_;if(!e.match(/-|_/))return _;const o=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(o,t)}return this.pluralRulesCache[n]=s,s}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,r).map((e=>`${t}${e}`))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort(((e,t)=>k[e]-k[t])).map((e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`)):[]}getSuffix(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=this.getRule(e,r);return o?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const N=function(e,r,o){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=((e,t,r)=>{const o=c(e,r);return void 0!==o?o:c(t,r)})(e,r,o);return!i&&s&&t(o)&&(i=m(e,o,n),void 0===i&&(i=m(r,o,n))),i},R=e=>e.replace(/\$/g,"$$$$");class j{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=w.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:o,prefix:n,prefixEscaped:s,suffix:i,suffixEscaped:a,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:h,nestingPrefixEscaped:g,nestingSuffix:f,nestingSuffixEscaped:m,nestingOptionsSeparator:v,maxReplaces:y,alwaysFormat:b}=e.interpolation;this.escape=void 0!==t?t:d,this.escapeValue=void 0===r||r,this.useRawValueToEscape=void 0!==o&&o,this.prefix=n?p(n):s||"{{",this.suffix=i?p(i):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=h?p(h):g||p("$t("),this.nestingSuffix=f?p(f):m||p(")"),this.nestingOptionsSeparator=v||",",this.maxReplaces=y||1e3,this.alwaysFormat=void 0!==b&&b,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e?.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,r,n,s){let i,a,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=e=>{if(e.indexOf(this.formatSeparator)<0){const t=N(r,c,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(t,void 0,n,{...s,...r,interpolationkey:e}):t}const t=e.split(this.formatSeparator),o=t.shift().trim(),i=t.join(this.formatSeparator).trim();return this.format(N(r,c,o,this.options.keySeparator,this.options.ignoreJSONStructure),i,n,{...s,...r,interpolationkey:o})};this.resetRegExp();const p=s?.missingInterpolationHandler||this.options.missingInterpolationHandler,h=void 0!==s?.interpolation?.skipOnVariables?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>R(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?R(this.escape(e)):R(e)}].forEach((r=>{for(l=0;i=r.regex.exec(e);){const n=i[1].trim();if(a=u(n),void 0===a)if("function"==typeof p){const r=p(e,i,s);a=t(r)?r:""}else if(s&&Object.prototype.hasOwnProperty.call(s,n))a="";else{if(h){a=i[0];continue}this.logger.warn(`missed to pass in variable ${n} for interpolating ${e}`),a=""}else t(a)||this.useRawValueToEscape||(a=o(a));const c=r.safeValue(a);if(e=e.replace(i[0],c),h?(r.regex.lastIndex+=a.length,r.regex.lastIndex-=i[0].length):r.regex.lastIndex=0,l++,l>=this.maxReplaces)break}})),e}nest(e,r){let n,s,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l=(e,t)=>{const r=this.nestingOptionsSeparator;if(e.indexOf(r)<0)return e;const o=e.split(new RegExp(`${r}[ ]*{`));let n=`{${o[1]}`;e=o[0],n=this.interpolate(n,i);const s=n.match(/'/g),a=n.match(/"/g);((s?.length??0)%2==0&&!a||a.length%2!=0)&&(n=n.replace(/'/g,'"'));try{i=JSON.parse(n),t&&(i={...t,...i})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${r}${n}`}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let c=[];i={...a},i=i.replace&&!t(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let u=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map((e=>e.trim()));n[1]=e.shift(),c=e,u=!0}if(s=r(l.call(this,n[1].trim(),i),i),s&&n[0]===e&&!t(s))return s;t(s)||(s=o(s)),s||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),s=""),u&&(s=c.reduce(((e,t)=>this.format(e,t,a.lng,{...a,interpolationkey:n[1].trim()})),s.trim())),e=e.replace(n[0],s),this.regexp.lastIndex=0}return e}}const F=e=>{const t={};return(r,o,n)=>{let s=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(s={...s,[n.interpolationkey]:void 0});const i=o+JSON.stringify(s);let a=t[i];return a||(a=e(v(o),n),t[i]=a),a(r)}};class D{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=w.create("formatter"),this.options=e,this.formats={number:F(((e,t)=>{const r=new Intl.NumberFormat(e,{...t});return e=>r.format(e)})),currency:F(((e,t)=>{const r=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>r.format(e)})),datetime:F(((e,t)=>{const r=new Intl.DateTimeFormat(e,{...t});return e=>r.format(e)})),relativetime:F(((e,t)=>{const r=new Intl.RelativeTimeFormat(e,{...t});return e=>r.format(e,t.range||"day")})),list:F(((e,t)=>{const r=new Intl.ListFormat(e,{...t});return e=>r.format(e)}))},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=F(t)}format(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n=t.split(this.formatSeparator);if(n.length>1&&n[0].indexOf("(")>1&&n[0].indexOf(")")<0&&n.find((e=>e.indexOf(")")>-1))){const e=n.findIndex((e=>e.indexOf(")")>-1));n[0]=[n[0],...n.splice(1,e)].join(this.formatSeparator)}return n.reduce(((e,t)=>{const{formatName:n,formatOptions:s}=(e=>{let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const o=e.split("(");t=o[0].toLowerCase().trim();const n=o[1].substring(0,o[1].length-1);"currency"===t&&n.indexOf(":")<0?r.currency||(r.currency=n.trim()):"relativetime"===t&&n.indexOf(":")<0?r.range||(r.range=n.trim()):n.split(";").forEach((e=>{if(e){const[t,...o]=e.split(":"),n=o.join(":").trim().replace(/^'+|'+$/g,""),s=t.trim();r[s]||(r[s]=n),"false"===n&&(r[s]=!1),"true"===n&&(r[s]=!0),isNaN(n)||(r[s]=parseInt(n,10))}}))}return{formatName:t,formatOptions:r}})(t);if(this.formats[n]){let t=e;try{const i=o?.formatParams?.[o.interpolationkey]||{},a=i.locale||i.lng||o.locale||o.lng||r;t=this.formats[n](e,a,{...s,...o,...i})}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${n}`),e}),e)}}class I extends S{constructor(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=o,this.logger=w.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,o.backend,o)}queueLoad(e,t,r,o){const n={},s={},i={},a={};return e.forEach((e=>{let o=!0;t.forEach((t=>{const i=`${e}|${t}`;!r.reload&&this.store.hasResourceBundle(e,t)?this.state[i]=2:this.state[i]<0||(1===this.state[i]?void 0===s[i]&&(s[i]=!0):(this.state[i]=1,o=!1,void 0===s[i]&&(s[i]=!0),void 0===n[i]&&(n[i]=!0),void 0===a[t]&&(a[t]=!0)))})),o||(i[e]=!0)})),(Object.keys(n).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(n),pending:Object.keys(s),toLoadLanguages:Object.keys(i),toLoadNamespaces:Object.keys(a)}}loaded(e,t,r){const o=e.split("|"),n=o[0],s=o[1];t&&this.emit("failedLoading",n,s,t),!t&&r&&this.store.addResourceBundle(n,s,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const i={};this.queue.forEach((r=>{((e,t,r)=>{const{obj:o,k:n}=a(e,t,Object);o[n]=o[n]||[],o[n].push(r)})(r.loaded,[n],s),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(r,e),t&&r.errors.push(t),0!==r.pendingCount||r.done||(Object.keys(r.loaded).forEach((e=>{i[e]||(i[e]={});const t=r.loaded[e];t.length&&t.forEach((t=>{void 0===i[e][t]&&(i[e][t]=!0)}))})),r.done=!0,r.errors.length?r.callback(r.errors):r.callback())})),this.emit("loaded",i),this.queue=this.queue.filter((e=>!e.done))}read(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:r,tried:o,wait:n,callback:s});this.readingCalls++;const i=(i,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}i&&a&&o<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,r,o+1,2*n,s)}),n):s(i,a)},a=this.backend[r].bind(this.backend);if(2!==a.length)return a(e,t,i);try{const r=a(e,t);r&&"function"==typeof r.then?r.then((e=>i(null,e))).catch(i):i(null,r)}catch(e){i(e)}}prepareLoading(e,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();t(e)&&(e=this.languageUtils.toResolveHierarchy(e)),t(r)&&(r=[r]);const s=this.queueLoad(e,r,o,n);if(!s.toLoad.length)return s.pending.length||n(),null;s.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const r=e.split("|"),o=r[0],n=r[1];this.read(o,n,"read",void 0,void 0,((r,s)=>{r&&this.logger.warn(`${t}loading namespace ${n} for language ${o} failed`,r),!r&&s&&this.logger.log(`${t}loaded namespace ${n} for language ${o}`,s),this.loaded(e,r,s)}))}saveMissing(e,t,r,o,n){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(!this.services?.utils?.hasLoadedNamespace||this.services?.utils?.hasLoadedNamespace(t)){if(null!=r&&""!==r){if(this.backend?.create){const a={...s,isUpdate:n},l=this.backend.create.bind(this.backend);if(l.length<6)try{let n;n=5===l.length?l(e,t,r,o,a):l(e,t,r,o),n&&"function"==typeof n.then?n.then((e=>i(null,e))).catch(i):i(null,n)}catch(e){i(e)}else l(e,t,r,o,i,a)}e&&e[0]&&this.store.addResource(e[0],t,r,o)}}else this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const T=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let r={};if("object"==typeof e[1]&&(r=e[1]),t(e[1])&&(r.defaultValue=e[1]),t(e[2])&&(r.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const t=e[3]||e[2];Object.keys(t).forEach((e=>{r[e]=t[e]}))}return r},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),M=e=>(t(e.ns)&&(e.ns=[e.ns]),t(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),t(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e),$=()=>{};class W extends S{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var r;if(super(),this.options=M(e),this.services={},this.logger=w,this.modules={external:[]},r=this,Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach((e=>{"function"==typeof r[e]&&(r[e]=r[e].bind(r))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"==typeof o&&(n=o,o={}),null==o.defaultNS&&o.ns&&(t(o.ns)?o.defaultNS=o.ns:o.ns.indexOf("translation")<0&&(o.defaultNS=o.ns[0]));const s=T();this.options={...s,...this.options,...M(o)},this.options.interpolation={...s.interpolation,...this.options.interpolation},void 0!==o.keySeparator&&(this.options.userDefinedKeySeparator=o.keySeparator),void 0!==o.nsSeparator&&(this.options.userDefinedNsSeparator=o.nsSeparator);const i=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?w.init(i(this.modules.logger),this.options):w.init(null,this.options),t=this.modules.formatter?this.modules.formatter:D;const r=new C(this.options);this.store=new x(this.options.resources,this.options);const o=this.services;o.logger=w,o.resourceStore=this.store,o.languageUtils=r,o.pluralResolver=new P(r,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format||(o.formatter=i(t),o.formatter.init(o,this.options),this.options.interpolation.format=o.formatter.format.bind(o.formatter)),o.interpolator=new j(this.options),o.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},o.backendConnector=new I(i(this.modules.backend),o.resourceStore,o,this.options),o.backendConnector.on("*",(function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),n=1;n<r;n++)o[n-1]=arguments[n];e.emit(t,...o)})),this.modules.languageDetector&&(o.languageDetector=i(this.modules.languageDetector),o.languageDetector.init&&o.languageDetector.init(o,this.options.detection,this.options)),this.modules.i18nFormat&&(o.i18nFormat=i(this.modules.i18nFormat),o.i18nFormat.init&&o.i18nFormat.init(this)),this.translator=new A(this.services,this.options),this.translator.on("*",(function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),n=1;n<r;n++)o[n-1]=arguments[n];e.emit(t,...o)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,n||(n=$),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const a=r(),l=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(t),n(e,t)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),a}loadResources(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$;const o=t(e)?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===o?.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return r();const e=[],t=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};if(o)t(o);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>t(e)))}this.options.preload?.forEach?.((e=>t(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),r(e)}))}else r(null)}reloadResources(e,t,o){const n=r();return"function"==typeof e&&(o=e,e=void 0),"function"==typeof t&&(o=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),o||(o=$),this.services.backendConnector.reload(e,t,(e=>{n.resolve(),o(e)})),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&O.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}}changeLanguage(e,o){var n=this;this.isLanguageChangingTo=e;const s=r();this.emit("languageChanging",e);const i=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},a=(e,t)=>{t?(i(t),this.translator.changeLanguage(t),this.isLanguageChangingTo=void 0,this.emit("languageChanged",t),this.logger.log("languageChanged",t)):this.isLanguageChangingTo=void 0,s.resolve((function(){return n.t(...arguments)})),o&&o(e,(function(){return n.t(...arguments)}))},l=r=>{e||r||!this.services.languageDetector||(r=[]);const o=t(r)?r:this.services.languageUtils.getBestMatchFromCodes(r);o&&(this.language||i(o),this.translator.language||this.translator.changeLanguage(o),this.services.languageDetector?.cacheUserLanguage?.(o)),this.loadResources(o,(e=>{a(e,o)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e):l(this.services.languageDetector.detect()),s}getFixedT(e,r,o){var n=this;const s=function(e,t){let r;if("object"!=typeof t){for(var i=arguments.length,a=new Array(i>2?i-2:0),l=2;l<i;l++)a[l-2]=arguments[l];r=n.options.overloadTranslationOptionHandler([e,t].concat(a))}else r={...t};r.lng=r.lng||s.lng,r.lngs=r.lngs||s.lngs,r.ns=r.ns||s.ns,""!==r.keyPrefix&&(r.keyPrefix=r.keyPrefix||o||s.keyPrefix);const c=n.options.keySeparator||".";let u;return u=r.keyPrefix&&Array.isArray(e)?e.map((e=>`${r.keyPrefix}${c}${e}`)):r.keyPrefix?`${r.keyPrefix}${c}${e}`:e,n.t(u,r)};return t(e)?s.lng=e:s.lngs=e,s.ns=r,s.keyPrefix=o,s}t(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.translator?.translate(...t)}exists(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.translator?.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],o=!!this.options&&this.options.fallbackLng,n=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;const s=(e,t)=>{const r=this.services.backendConnector.state[`${e}|${t}`];return-1===r||0===r||2===r};if(t.precheck){const e=t.precheck(this,s);if(void 0!==e)return e}return!!this.hasResourceBundle(r,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!s(r,e)||o&&!s(n,e)))}loadNamespaces(e,o){const n=r();return this.options.ns?(t(e)&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{n.resolve(),o&&o(e)})),n):(o&&o(),Promise.resolve())}loadLanguages(e,o){const n=r();t(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter((e=>s.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return i.length?(this.options.preload=s.concat(i),this.loadResources((e=>{n.resolve(),o&&o(e)})),n):(o&&o(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services?.languageUtils||new C(T());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new W(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const o={...this.options,...e,isClone:!0},n=new W(o);void 0===e.debug&&void 0===e.prefix||(n.logger=n.logger.clone(e));if(["store","services","language"].forEach((e=>{n[e]=this[e]})),n.services={...this.services},n.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},r){const e=Object.keys(this.store.data).reduce(((e,t)=>(e[t]={...this.store.data[t]},Object.keys(e[t]).reduce(((r,o)=>(r[o]={...e[t][o]},r)),{}))),{});n.store=new x(e,o),n.services.resourceStore=n.store}return n.translator=new A(n.services,o),n.translator.on("*",(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];n.emit(e,...r)})),n.init(o,t),n.translator.options=o,n.translator.backendConnector.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},n}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const z=W.createInstance();z.createInstance=W.createInstance,e.exports=z},5821:(e,t,r)=>{r.r(t),r.d(t,{langResource:()=>o});const o={en_US:{menu:r(6483),lang:r(5886)},zh_CN:{menu:r(3420),lang:r(9893)}}},2081:e=>{e.exports=require("child_process")},2298:e=>{e.exports=require("electron")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},3837:e=>{e.exports=require("util")},9395:(e,t,r)=>{function o(){const e={};return e.promise=new Promise(((t,r)=>{e.resolve=t,e.reject=r})),e}r.r(t),r.d(t,{default:()=>o})},5886:e=>{e.exports=JSON.parse('{"hello_world":"Hello World","app_name":"EverkmNote"}')},6483:e=>{e.exports=JSON.parse('{"file":"File","about":"About EverkmNote","services":"Services","hide":"Hide","hideOthers":"Hide Others","unhide":"Unhide","quit":"Quit EverkmNote","edit":"Edit","view":"View","window":"Window","help":"Help","toggleFullscreen":"Toggle Fullscreen","resetZoom":"Reset Zoom","zoomIn":"Zoom In","zoomOut":"Zoom Out","toggleDevTools":"Toggle DevTools","reload":"Reload Window","close":"Close Window","undo":"Undo","redo":"Redo","cut":"Cut","copy":"Copy","paste":"Paste","delete":"Delete","selectAll":"Select All","commandPalette":"Command Palette","directory":"Directory","mdList":"Note List","findReplace":"Find and Replace","history":"History","newNote":"New Note","save":"Save","saveAs":"Save As","closeTab":"Close Tab","revealBase":"Reveal Base","shortcutKeySettings":"Shortcut Key Settings"}')},9893:e=>{e.exports=JSON.parse('{"hello_world":"\u4f60\u597d\uff0c\u4e16\u754c","app_name":"\u6bd3\u77e5\u7b14\u8bb0"}')},3420:e=>{e.exports=JSON.parse('{"file":"\u6587\u4ef6","about":"\u5173\u4e8e\u6bd3\u77e5\u7b14\u8bb0","services":"\u670d\u52a1","hide":"\u9690\u85cf","hideOthers":"\u9690\u85cf\u5176\u4ed6","unhide":"\u663e\u793a\u6240\u6709","quit":"\u9000\u51fa\u6bd3\u77e5\u7b14\u8bb0","edit":"\u7f16\u8f91","view":"\u89c6\u56fe","window":"\u7a97\u53e3","help":"\u5e2e\u52a9","toggleFullscreen":"\u5168\u5c4f","resetZoom":"\u91cd\u7f6e\u7f29\u653e","zoomIn":"\u653e\u5927","zoomOut":"\u7f29\u5c0f","toggleDevTools":"\u5f00\u53d1\u8005\u5de5\u5177","reload":"\u91cd\u65b0\u52a0\u8f7d\u7a97\u53e3","close":"\u5173\u95ed\u7a97\u53e3","undo":"\u64a4\u9500","redo":"\u91cd\u505a","cut":"\u526a\u5207","copy":"\u590d\u5236","paste":"\u7c98\u8d34","delete":"\u5220\u9664","selectAll":"\u5168\u9009","commandPalette":"\u547d\u4ee4\u9762\u677f","directory":"\u76ee\u5f55","mdList":"\u7b14\u8bb0\u5217\u8868","findReplace":"\u67e5\u627e\u548c\u66ff\u6362","history":"\u5386\u53f2","newNote":"\u65b0\u5efa\u7b14\u8bb0","save":"\u4fdd\u5b58","saveAs":"\u53e6\u5b58\u4e3a","closeTab":"\u5173\u95ed\u6807\u7b7e\u9875","revealBase":"\u6253\u5f00Base\u76ee\u5f55","shortcutKeySettings":"\u5feb\u6377\u952e\u8bbe\u7f6e"}')}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,r),s.exports}r.c=t,r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};r(r.s=2772)})();